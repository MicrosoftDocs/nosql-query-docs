---
title: QA1003 - Case Insensitivity
description: Review the advisor message returned when the query uses case-insensitive STARTSWITH or StringEquals, which can be costly compared to case-sensitive operations.
ms.date: 11/10/2025
appliesto:
  - ✅ Azure Cosmos DB for NoSQL
---

# QA1003: Case Insensitive StartsWith Or StringEquals string comparison

This advisor message is returned when a query uses case-insensitive string comparison functions. The message clarifies the reason and provides guidance to improve query performance.

## Properties

| | Value |
| --- | --- |
| **RuleID** | `QA1003` |
| **Title** | `CaseInsensitiveStartsWithOrStringEquals` |
| **Category** | `Performance` |

## Cause

The query uses case-insensitive `STARTSWITH` or `StringEquals`.

## Rule Description

Case-insensitive string searches can be costly. For example, case-sensitive `STARTSWITH` uses a precise index scan, but case-insensitive `STARTSWITH` uses an [expanded index scan]([Overview of Indexing](/azure/cosmos-db/index-overview#expanded-index-scan)). 

## Recommendation

Define and index a computed property that converts the string to lowercase (or upper case) and use case-sensitive comparison against the computed property.

## Example

Original query:

```nosql
SELECT *  
FROM c  
WHERE StringEquals(c.name, "abc", true)
```

Create a compute property on `c.name`

```nosql
{ 
  "computedProperties": [ 
	{ 
		"name": "cp_lowerName", 
		"query": "SELECT VALUE LOWER(c.name) FROM c" 
	} 
  ] 
}
```

Index `cp_lowerName` and the use the following updated query:

```nosql
SELECT * 
FROM c 
WHERE StringEquals(c.name, "abc", false)
```
