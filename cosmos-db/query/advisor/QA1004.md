---
title: QA1004 - ENDSWITH
description: Review the advisor message returned when the query uses ENDSWITH, which is less efficient than prefix-based matching and requires a full index scan.
ms.date: 01/23/2026
appliesto:
  - âœ… Azure Cosmos DB for NoSQL
---

# QA1004: EndsWith

This advisor message is returned when a query uses the ENDSWITH function. The message clarifies the reason and provides guidance to improve query performance.

## Properties

| | Value |
| --- | --- |
| **RuleID** | `QA1004` |
| **Title** | `ENDSWITH` |
| **Category** | `Performance` |

## Cause

The query uses `ENDSWITH`.

## Rule Description

`ENDSWITH` is less efficient than prefix-based matching. `ENDSWITH` requires using a full index scan, which can be more costly than functions like `STARTSWITH`, which performs a precise index scan. To understand the difference between the different type of index scan, see  [Overview of Indexing](/azure/cosmos-db/index-overview).

## Recommendation

If the comparison logic allows, create and index a computed property that reverses the string and use `STARTSWITH` for comparison. Since the computed property stores the reversed value, you must also reverse the search literal in your query.

For more information on computed properties, see [Computed properties](../computed-properties.md).

## Example

Original query:

```cosmos-db
SELECT * 
FROM c 
WHERE ENDSWITH(c.name, "xyz")
```

To improve this query, first create and index a computed property that reverses the property:

```json
{ 
  "computedProperties": [ 
    { 
      "name": "cp_reverseName", 
      "query": "SELECT VALUE REVERSE(c.name) FROM c" 
    } 
  ] 
}
```

> [!NOTE]
> The computed property `cp_reverseName` stores the reversed value of `c.name`. To match items that end with `"xyz"`, you must also reverse the literal to `"zyx"` in your `STARTSWITH` comparison.

Then use the following updated query:

```cosmos-db
SELECT * 
FROM c 
WHERE STARTSWITH(c.cp_reverseName, "zyx")
```
